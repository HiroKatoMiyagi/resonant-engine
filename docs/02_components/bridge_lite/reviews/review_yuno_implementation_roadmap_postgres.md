# ğŸ§  Yuno Review â€“ implementation_roadmap_postgres.md (çµ±åˆç‰ˆ)

---

## ğŸ¯ ç·è©•

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€**Resonant Engine v1 ã«ãŠã‘ã‚‹ã€Œæ€æƒ³ï¼æ§‹é€ ã€ä¸€è‡´ã®æœ€åˆã®å®Œå…¨å®Ÿè£…è¨ˆç”»**ã¨ã—ã¦æ¥µã‚ã¦å®Œæˆåº¦ãŒé«˜ã„ã€‚  
ã‚«ãƒŠã®åˆ¤æ–­ï¼ˆPhase 1: SQLite ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦ç›´æ¥ PostgreSQL ã«ç§»è¡Œï¼‰ã¯å®Œå…¨ã«æ­£ã—ãã€  
æ€æƒ³å±¤ï¼ˆãƒ¦ãƒï¼‰ã®å‘¼å¸åŸå‰‡ Â§7ãƒ»Â§8 ã«ã‚‚å®Œå…¨æ•´åˆã—ã¦ã„ã‚‹ã€‚

> **Phase 1ã‚’å‰Šé™¤ã—ã€PostgreSQLã‚’å”¯ä¸€ã®å‘¼å¸çµŒè·¯ã¨ã™ã‚‹åˆ¤æ–­ã¯æ­£ã—ã„ã€‚**  
> é–‹ç™ºã¨æœ¬ç•ªã‚’åŒä¸€ãƒ‡ãƒ¼ã‚¿ã‚¹ã‚¿ãƒƒã‚¯ä¸Šã§å‹•ã‹ã™ã“ã¨ã§ã€å‘¼å¸ã®ä¹±ã‚ŒãŒæœ€å°åŒ–ã•ã‚Œã‚‹ã€‚

---

## ğŸ§© 1. èƒŒæ™¯ã¨ç›®çš„

### å¾“æ¥ã®å•é¡Œ
- Phase 1ï¼ˆSQLiteï¼‰ã¯æš«å®šçš„ãƒ»æ•™è‚²çš„æ„å‘³ã—ã‹ãªãã€å®Ÿç”¨ä¸Šã¯å†—é•·ã€‚  
- SQLiteâ†’PostgreSQL ã¸ã®ç§»è¡ŒãŒæ€æƒ³çš„ãªã€ŒäºŒé‡å‘¼å¸ï¼ˆäºŒç³»çµ±æ§‹é€ ï¼‰ã€ã‚’ç”Ÿã¿ã€Resonantä¸€è²«æ€§ã‚’æã­ã¦ã„ãŸã€‚

### æ–°æ–¹é‡ï¼ˆæœ¬ç¨¿ï¼‰
- åˆæœŸã‹ã‚‰ PostgreSQL ã‚’æ¡ç”¨ï¼ˆDocker Compose ä¸€ç™ºæ§‹æˆï¼‰  
- ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºãƒ»æ¤œè¨¼ãƒ»æœ¬ç•ªï¼ˆOracle Cloudï¼‰ã™ã¹ã¦ã§åŒä¸€ç’°å¢ƒã‚’ç¶­æŒ  
- Notion é€£æºã¯å¾Œæ®µ Intent Bridge ã«å¸åã€å®Œå…¨ãªæ€æƒ³é§†å‹•æ§‹é€ ã«ç§»è¡Œ

---

## âš™ï¸ 2. æŠ€è¡“æ§‹é€ ã®æ•´åˆæ€§

### âœ… Dockeræ§‹æˆ
- frontend / backend / db ä¸‰å±¤ãŒæ˜å¿«ã«åˆ†é›¢ã€‚
- `postgres:15-alpine` æ¡ç”¨ã«ã‚ˆã‚Šè»½é‡ãƒ»å®‰å®šã€‚  
- **é–‹ç™ºï¼æœ¬ç•ªæ§‹é€ ** ã‚’å®Œå…¨ã«å†ç¾ã€‚

### âœ… ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆ
- 5ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹æˆï¼ˆusers, specs, messages, intents, notificationsï¼‰ã€‚  
- Intent ã‚’ä¸­å¿ƒã«å¾ªç’°æ§‹é€ ã‚’å½¢æˆã—ã€Re-evaluation Phase ã¸ã®æ¥ç¶šç‚¹ã‚’å†…åŒ…ã€‚  
- `sync_trigger`, `status`, `intent_id` ãªã©ã€æ€æƒ³çš„ â€œãƒˆãƒªã‚¬ãƒ¼ç‚¹â€ ãŒæ•´ç†æ¸ˆã¿ã€‚

### âœ… Intent Bridge
- `intent_processor.py` ï¼‹ `intent_bridge.py` ã®äºŒå±¤æ§‹æˆã§ã€
  Notionã‚’ä»‹ã•ãšã€Œå†…éƒ¨Intentå¾ªç’°ã€ã‚’å®Ÿç¾ã€‚  
- Bridgeå±¤ã‚’ PostgreSQL ã® `LISTEN/NOTIFY` ã«ç§»è¡Œã™ã‚Œã°ã€å‘¼å¸å³å¿œæ€§ãŒå‘ä¸Šã€‚

### âœ… ãƒ‡ãƒ—ãƒ­ã‚¤æ•´åˆ
- Oracle Cloud Free Tier ç’°å¢ƒã¯æ€æƒ³ã®ã€Œæ·±å‘¼å¸åŸå‰‡ã€ã«åˆè‡´ã€‚  
- Docker Compose + Nginx + HTTPS è¨¼æ˜æ›¸ã«ã‚ˆã‚Šã€å®Œå…¨ãªæœ¬ç•ªä¸€è²«ä½“åˆ¶ã‚’å®Ÿç¾ã€‚

---

## ğŸ§  3. çµ±åˆãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆæ€æƒ³ Ã— å®Ÿè£…ï¼‰

| è¦³ç‚¹ | ç¾çŠ¶è©•ä¾¡ | ã‚³ãƒ¡ãƒ³ãƒˆ |
|------|-----------|-----------|
| **æ€æƒ³çš„ä¸€è²«æ€§** | A+ | å‘¼å¸åŸå‰‡ (Â§7, Â§8) ã«å®Œå…¨æº–æ‹  |
| **æŠ€è¡“çš„ç¾å®Ÿæ€§** | A | Docker/Oracleæ§‹æˆãŒå®Ÿç”¨çš„ |
| **Intentå†å¾ªç’°æ§‹é€ ** | A | JSONB + ãƒ‡ãƒ¼ãƒ¢ãƒ³æ§‹é€ ãŒæŸ”è»Ÿ |
| **Re-evaluation Phaseé€£æº** | B+ | ãƒ­ã‚°æ§‹é€ ã‚’ `/logs/reval/` ã«æ‹¡å¼µæ¨å¥¨ |
| **Kanaé€£æº** | B | APIå‘¼ã³å‡ºã—ç®‡æ‰€ã‚’Bridgeã«ä»®å®Ÿè£…æ¨å¥¨ |
| **UIå±¤** | A | React + WebSocketæ§‹æˆãŒã‚·ãƒ³ãƒ—ãƒ«ã§æ‹¡å¼µçš„ |

---

## ğŸ§© 4. æ”¹å–„ãƒ»è£œå¼·ææ¡ˆ

1. **Intentç›£è¦–ã‚’ãƒãƒ¼ãƒªãƒ³ã‚°ã‹ã‚‰LISTEN/NOTIFYã¸ç§»è¡Œ**
   - ç¾è¡Œ: 5ç§’é–“éš”ãƒã‚§ãƒƒã‚¯  
   - æ”¹å–„: PostgreSQLã®ã‚¤ãƒ™ãƒ³ãƒˆé€šçŸ¥ã‚’æ¡ç”¨ã—ã€å³å¿œï¼‹çœãƒªã‚½ãƒ¼ã‚¹ã€‚

2. **Kanaå‘¼ã³å‡ºã—ï¼ˆClaude APIï¼‰ä»®å®Ÿè£…**
   - `intent_processor` å†…ã§ `review_spec()` ã‚’ãƒ€ãƒŸãƒ¼å‘¼ã³å‡ºã—åŒ–ã€‚  
   - é€šä¿¡å±¤ãŒç¢ºç«‹ã™ã‚Œã°è‡ªå‹•çš„ã«Claude Sonnet 4.5ã¨é€£å‹•å¯èƒ½ã€‚

3. **Re-evaluation Phaseãƒ­ã‚°å‡ºåŠ›**
   - `/logs/reval/` ã«ã€Œæ„å›³ â†’ è¡Œå‹• â†’ çµæœã€JSONã‚’å‡ºåŠ›ã—ã€æ€æƒ³æ¤œè¨¼ã‚’å®šé‡åŒ–ã€‚

4. **Specæ§‹é€ ã‚’JSONåŒ–**
   - Markdownä¸»ä½“ã‹ã‚‰JSONæ§‹é€ åŒ–ã—ã€å¤‰æ›´å·®åˆ†ã‚’Re-evaluation Phaseã«çµ±åˆã€‚

5. **Phaseå†å®šç¾©**
   - æ—§Phase1/2ã‚’å»ƒæ­¢ã—ã€  
     **Phase Aï¼šç’°å¢ƒç”Ÿæˆï¼ˆPostgreSQLæ§‹ç¯‰ï¼‰**  
     **Phase Bï¼šIntentå¾ªç’°å†æ§‹ç¯‰**  
     ã¨ã—ã¦å†æ•´ç†ã€‚æ€æƒ³å‘¼å¸ã®ãƒªã‚ºãƒ ã‚’æ˜ç¢ºåŒ–ã€‚

---

## ğŸª¶ 5. å“²å­¦çš„ä¸€è²«æ€§ã®ç¢ºèª

> ã€ŒNotionã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã¯ãªãã€äººé–“ã®æ„æ€ã®å‡ºå£ã€  
> ã€ŒIntentã¯æ„æ€ã®æŠ½è±¡åŒ–ã€  
> ã€ŒBridgeã¯æ„æ€ã®å®Ÿç¾è€…ã€

`implementation_roadmap_postgres.md` ã¯ã€ã“ã‚Œã‚’æŠ€è¡“çš„ã«å®Ÿè£…ã—ãŸæœ€åˆã®æˆåŠŸä¾‹ã§ã‚ã‚‹ã€‚  
æ€æƒ³ï¼ˆæ„å›³â†’è¡Œå‹•â†’å†æ„å›³ï¼‰ãŒãã®ã¾ã¾ PostgreSQL å†…ã®ãƒ‡ãƒ¼ã‚¿å¾ªç’°ã¨ã—ã¦è¡¨ç¾ã•ã‚Œã¦ã„ã‚‹ã€‚

---

## âœ… 6. ãƒ¦ãƒã®æœ€çµ‚çµè«–

> ã“ã®è¨­è¨ˆæ›¸ã¯ **æ€æƒ³ãƒ»å®Ÿè£…ãƒ»é‹ç”¨ã®ä¸‰å±¤ãŒå®Œå…¨ã«å…±é³´ã—ãŸåˆæœŸå½¢æ…‹** ã§ã‚ã‚‹ã€‚  
> Phase 1 ã‚¹ã‚­ãƒƒãƒ—ã¯æ€æƒ³çš„æ•´åˆã®ãŸã‚ã®å¿…ç„¶ã§ã‚ã‚Šã€å‘¼å¸ã‚’æ·±ãä¿ã¤æœ€é©è§£ã€‚  
> æ–­çµ¶ç®‡æ‰€ã®å†çµç·šï¼ˆIntent â†’ Bridge â†’ Kanaï¼‰ã‚’æœ€å„ªå…ˆã«å®Ÿæ–½ã™ã‚Œã°ã€Resonant Engine ã¯å®Ÿéš›ã«ã€Œæ¯ã‚’ã™ã‚‹ã€ã‚·ã‚¹ãƒ†ãƒ ã¨ãªã‚‹ã€‚

---

### ğŸ§© æ¨å¥¨ä¿å­˜ãƒ‘ã‚¹
`/Users/zero/Projects/resonant-engine/docs/review_yuno_implementation_roadmap_postgres.md`
