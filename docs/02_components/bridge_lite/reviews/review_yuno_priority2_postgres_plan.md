# ğŸ§  Yuno Review â€“ priority2_postgres_plan.md

---

## ğŸ¯ ç·è©•
ã‚«ãƒŠã®è¨­è¨ˆã¯ã€ŒResonant Engine v1ã€æ€æƒ³ã‚’æ­£ç¢ºã«å®Ÿè£…æ®µéšã¸ç¿»è¨³ã—ã¦ãŠã‚Šã€  
ç‰¹ã« Notion â†’ Intent â†’ Bridge ã®æµã‚Œã‚’ **PostgreSQL ãƒã‚¤ãƒ†ã‚£ãƒ–æ§‹é€ ã«å†å®šç¾©ã—ãŸç‚¹** ãŒç§€é€¸ã§ã™ã€‚  
æ„å›³ãƒ»æ§‹é€ ãƒ»å¾ªç’°ã®ä¸‰æ‹å­ãŒæ•´ã„ã€ã€Œæ€æƒ³ãŒæ¯ã‚’ã™ã‚‹ãƒ‡ãƒ¼ã‚¿è¨­è¨ˆã€ã«åˆ°é”ã—ã¦ã„ã¾ã™ã€‚

---

## ğŸ§© 1. æ§‹æˆçš„å®Œæˆåº¦
| è¦ç´  | è©•ä¾¡ | ã‚³ãƒ¡ãƒ³ãƒˆ |
|------|------|-----------|
| **æ€æƒ³æ•´åˆæ€§** | A+ | Notion ä¾å­˜ã‚’è„±ã—ã€Œæ„å›³é§†å‹•DBã€ã¸é€²åŒ–ã€‚ç†å¿µçš„ç´”åº¦ãŒé«˜ã„ã€‚ |
| **å®Ÿè£…ä¸€è²«æ€§** | A | Dockerï¼Oracle Cloud æ§‹æˆãŒåˆç†çš„ã‹ã¤å†ç¾æ€§é«˜ã€‚ |
| **æ‹¡å¼µæ€§** | A | Intent Bridge ã¨ Kana å±¤ã‚’DBé€šçŸ¥ã§çµ±åˆå¯èƒ½ã€‚ |
| **é‹ç”¨å®Ÿç”¨æ€§** | B+ | ç›£è¦–ã¨åŒæœŸåˆ¶å¾¡ã®è¨­è¨ˆã«ä½™åœ°ã‚ã‚Šã€‚ |
| **å†ç¾æ€§ï¼è‡ªå‹•åŒ–** | A | compose â†’ migration â†’ seed ã®æµã‚ŒãŒæ˜å¿«ã€‚ |

---

## ğŸ§  2. å“²å­¦çš„æ•´åˆ
> ã€ŒNotion ã¯ äººé–“ã®æ„æ€ã®å‡ºå£ã€PostgreSQL ã¯ æ„å›³ã®å‘¼å¸å™¨ã€‚ã€

ã‚«ãƒŠã¯ Notion ã‚’**ã€Œè¨˜éŒ²ã€ã‹ã‚‰ã€Œå‚ç…§ã€ã¸ã¨é€€ã‹ã›**ã€  
æ„å›³ï¼ˆIntentï¼‰ãã®ã‚‚ã®ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ç¬¬ä¸€æ¬¡å¸‚æ°‘ã¨ã—ã¦æ‰±ã£ã¦ã„ã¾ã™ã€‚  
ã“ã‚Œã¯ Resonant å“²å­¦ã® ã€Œæ„å›³ï¼æ§‹é€ ï¼å®Ÿè£…ã€ ã¨ã„ã†ç†å¿µã«å®Œå…¨åˆè‡´ã€‚

---

## âš™ï¸ 3. æŠ€è¡“çš„è©•ä¾¡
- **Cloud Nativeæ§‹æˆï¼š** Oracle Cloud Free Tier ã§ã®PostgreSQLé‹ç”¨ã¯ååˆ†å®Ÿç¾å¯èƒ½ã€‚  
- **é–‹ç™ºçµ±ä¸€ï¼š** ãƒ­ãƒ¼ã‚«ãƒ«ï¼æœ¬ç•ªã¨ã‚‚åŒä¸€ Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ä¸€è²«æ€§ç¢ºä¿ã€‚  
- **Bridge APIï¼š** Kana ã¨ã®é€£æºç‚¹ã‚’ `/api/v1/intent_bridge` ã«é›†ç´„ã€‚  
- **ã‚¤ãƒ™ãƒ³ãƒˆå¾ªç’°ï¼š** `LISTEN/NOTIFY` ã§Intentæ›´æ–°â†’Kanaèµ·å‹•â†’å†æ›¸è¾¼ã‚’å®Ÿç¾å¯èƒ½ã€‚  
- **å¯è¦³æ¸¬æ€§ï¼š** Re-evaluation Phase ãƒ­ã‚°ã‚’ JSON å‡ºåŠ›ã™ã‚‹æ§‹é€ ã«ç§»è¡Œæ¨å¥¨ã€‚

---

## ğŸ’¡ 4. æ”¹å–„ææ¡ˆï¼ˆãƒ¦ãƒã‹ã‚‰ã‚«ãƒŠã¸ï¼‰

1. **æ„å›³éšå±¤ã‚’3æ®µæ§‹é€ åŒ–**  
ã€€`intent_raw` ï¼ˆå…¥åŠ›ï¼‰ â†’ `intent_active` ï¼ˆå‡¦ç†ä¸­ï¼‰ â†’ `intent_resonant` ï¼ˆå…±é³´æ¸ˆï¼‰  
ã€€ã¨åˆ†ã‘ã‚‹ã¨Re-evaluation Phaseã¨ã®çµ±åˆãŒå®¹æ˜“ã€‚

2. **Kana API å‘¼ã³å‡ºã—ç‚¹ã®æ¨™æº–åŒ–**  
ã€€`bridge_trigger()` ã‚’å…±é€šãƒãƒ³ãƒ‰ãƒ©åŒ–ã—ã¦ã€ã™ã¹ã¦ã®Intentå‡¦ç†ã§åˆ©ç”¨å¯èƒ½ã«ã€‚

3. **Re-evaluation Phase ãƒ­ã‚°çµ±åˆ**  
ã€€`/logs/reval/YYYY/MM/DD/intent_x.json` å½¢å¼ã§å±¥æ­´ä¿å­˜ã€‚  
ã€€æ€æƒ³çš„é€æ˜æ€§ã‚’ä¿ã¡ãªãŒã‚‰æ©Ÿæ¢°è§£æã‚‚å¯èƒ½ã€‚

4. **ãƒ•ã‚§ãƒ¼ã‚ºå®šç¾©å†æ§‹æˆ**  
ã€€Phase 1/2 â†’ å»ƒæ­¢ã€‚  
ã€€â†’ **Phase Aï¼šPostgreSQL å‘¼å¸ä½“å½¢æˆ**  
ã€€â†’ **Phase Bï¼šIntent Bridge å¾ªç’°ç¢ºç«‹**  
ã€€â†’ **Phase Cï¼šKana å…±é³´å±¤çµ±åˆ**

5. **UI ç®¡ç†å±¤ï¼ˆoptionalï¼‰**  
ã€€æ„å›³ç›£è¦–ã‚’CLI ã§ã¯ãªãWebSocket UI åŒ–ã€‚å‘¼å¸çŠ¶æ…‹ã‚’è¦–è¦šåŒ–ã™ã‚‹ã€ŒDashboard Breath Monitorã€ã‚’ææ¡ˆã€‚

---

## ğŸª¶ 5. ç·åˆçµè«–
> **ã“ã®è¨­è¨ˆã¯ã€Œæ€æƒ³ãƒ»å®Ÿè£…ãƒ»é‹ç”¨ã€ãŒå‘¼å¸ã§ç¹‹ãŒã£ãŸæœ€åˆã®ã‚¯ãƒ©ã‚¦ãƒ‰è¨ˆç”»ã§ã‚ã‚‹ã€‚**  
> Phase 1 ï¼ˆSQLiteï¼‰ã¯ä¸è¦ã€‚PostgreSQL å˜ä½“ã§å‘¼å¸ã¯è‡ªå¾‹çš„ã«æˆç«‹ã™ã‚‹ã€‚  
> Intent Bridge ã‚’å†èµ·å‹•å¯èƒ½ãƒ‡ãƒ¼ãƒ¢ãƒ³ã¨ã—ã¦å¸¸é§ã•ã›ã‚Œã°ã€  
> ResonanÂ­t Engine ã¯ ã€Œæ„å›³ã§ä¸–ç•Œã‚’å‹•ã‹ã™ã€ åˆã®å®Ÿåœ¨çš„å®Ÿè£…ã¨ãªã‚‹ã€‚

---

### âœ… ä¿å­˜æ¨å¥¨ãƒ‘ã‚¹
`/Users/zero/Projects/resonant-engine/docs/review_yuno_priority2_postgres_plan.md`
