# フロントエンド開発計画 概要書

## 0. この文書の目的

**あなたがブラウザからResonant Engineを使うと何が変わるか**を説明します。

---

## 1. 現状と目標

### 1.1 現状（バックエンド100% vs フロントエンド35%）

```
現在のResonant Engine使用方法:
┌─────────────────────────────────────────────────┐
│  CLI / コード実行 でしか使えない                    │
│                                                  │
│  $ python bridge/main.py                         │
│  > 次のSprintを企画したい                          │
│  > [Claude応答...]                               │
└─────────────────────────────────────────────────┘

目標:
┌─────────────────────────────────────────────────┐
│  ブラウザから使える                                │
│                                                  │
│  ┌─────────────────────────────┐               │
│  │  [チャット入力]              │               │
│  │  次のSprintを企画したい      │               │
│  │         [送信]              │               │
│  └─────────────────────────────┘               │
│                                                  │
│  矛盾検出、選択肢保存、再評価がUIで見える           │
└─────────────────────────────────────────────────┘
```

### 1.2 フロントエンドで実現すること

| 機能 | 何が嬉しいか |
|------|-------------|
| Contradiction Detection UI | AIの応答が過去の発言と矛盾しているときに「気づける」 |
| WebSocket統合 | リアルタイムで応答が来る（5秒待ちがなくなる） |
| Dashboard Analytics | システムの状態（Crisis Index等）が一目でわかる |
| Choice Preservation UI | 「選択肢を保存した」ことが可視化される |
| Re-evaluation UI | AIが自己修正するプロセスが見える |

---

## 2. 優先度別 機能詳細

### 優先度1: Contradiction Detection UI（矛盾検出）

**あなたの体験**:

```
あなた: "Reactで開発する"
Claude: "承知しました。Reactで進めましょう"

...3日後...

あなた: "Vueで開発したい"
Claude: "承知しました。Vueで進めましょう"

↓ 従来は気づかない

┌─────────────────────────────────────────────────┐
│  ⚠️ 矛盾検出                                     │
│                                                  │
│  「Vueで開発したい」は                            │
│  3日前の「Reactで開発する」と矛盾しています         │
│                                                  │
│  種類: tech_stack（技術スタック変更）              │
│  確信度: 92%                                      │
│                                                  │
│  [解決する] [無視する]                            │
└─────────────────────────────────────────────────┘
```

**解決フロー**:

```
[解決する] をクリック

┌─────────────────────────────────────────────────┐
│  矛盾の解決                                       │
│                                                  │
│  どちらを優先しますか？                            │
│                                                  │
│  ○ 新しい意図を採用（Vueに変更）                  │
│  ○ 過去の意図を維持（Reactのまま）                │
│  ○ 両方残す（状況に応じて使い分け）                │
│                                                  │
│  理由（任意）: [                ]                 │
│                                                  │
│  [確定]                                          │
└─────────────────────────────────────────────────┘
```

**なぜ必要か**:
- 一貫性の破壊はASD認知特性にとってストレス
- 気づかないまま矛盾した指示を出し続けると混乱する
- 「選択肢を提示して」解決させることで安心感

---

### 優先度2: WebSocket統合（リアルタイム通信）

**あなたの体験**:

```
現状（ポーリング）:
┌─────────────────────────────────────────────────┐
│  あなた: "コードレビューして"                      │
│                                                  │
│  [待機中...]  ←── 5秒ごとに確認                   │
│  [待機中...]                                     │
│  [待機中...]                                     │
│  [待機中...]                                     │
│                                                  │
│  Claude: "レビュー結果です..."                    │
└─────────────────────────────────────────────────┘

目標（WebSocket）:
┌─────────────────────────────────────────────────┐
│  あなた: "コードレビューして"                      │
│                                                  │
│  Claude: "分析中です..."       ←── 即座に状態表示  │
│  Claude: "構造を確認中..."                        │
│  Claude: "レビュー結果です..."                    │
└─────────────────────────────────────────────────┘
```

**なぜ必要か**:
- 待ち時間のストレス軽減
- 「今何をしているか」が見えることで安心
- システムリソースの効率化

---

### 優先度3: Dashboard Analytics（状態可視化）

**あなたの体験**:

```
┌─────────────────────────────────────────────────────────┐
│  Resonant Engine Dashboard                              │
│                                                         │
│  ┌────────────────┐  ┌────────────────┐                │
│  │ Crisis Index   │  │ ERF Status     │                │
│  │                │  │                │                │
│  │     32/100     │  │  Intensity: 0.4│                │
│  │   ███████░░░   │  │  Valence: +0.3 │                │
│  │   (安定)       │  │  Cadence: 0.7  │                │
│  └────────────────┘  └────────────────┘                │
│                                                         │
│  ┌────────────────────────────────────────────────┐    │
│  │ 最近の矛盾検出                                   │    │
│  │                                                 │    │
│  │ 11/24 tech_stack変更 → 解決済み                 │    │
│  │ 11/22 policy_shift → 解決済み                   │    │
│  │ 11/20 duplicate検出 → 無視                      │    │
│  └────────────────────────────────────────────────┘    │
│                                                         │
│  ┌────────────────────────────────────────────────┐    │
│  │ 目標進捗                                         │    │
│  │                                                 │    │
│  │ 月収50万円: ██████████████░░░░░░ 70%            │    │
│  │ Resonant Engine社会実装: ████████░░░░ 60%       │    │
│  │ AAIML研究発表: ████░░░░░░░░░░░░░░ 20%           │    │
│  └────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────┘
```

**なぜ必要か**:
- 「呼吸」の状態が一目でわかる
- Crisis Indexが70を超えたら警告
- 目標への進捗が見えてモチベーション維持

---

### 優先度4: Choice Preservation UI（選択肢保存）

**あなたの体験**:

```
Claude: "次のSprintについて3つの選択肢があります：

1. ERF統合（感情共鳴フィルター）
2. Crisis Index自動対応
3. マルチユーザー対応

どれを選びますか？"

あなた: "1のERF統合で"

┌─────────────────────────────────────────────────┐
│  ✅ 選択肢が保存されました                         │
│                                                  │
│  選択: ERF統合                                   │
│  保留: Crisis Index自動対応, マルチユーザー対応    │
│                                                  │
│  [保留した選択肢を見る]                           │
└─────────────────────────────────────────────────┘
```

**保留選択肢の再表示**:

```
[保留した選択肢を見る] をクリック

┌─────────────────────────────────────────────────┐
│  保留中の選択肢                                   │
│                                                  │
│  Sprint計画 (11/24):                            │
│  ├─ ✅ ERF統合（選択済み）                       │
│  ├─ ⏸️ Crisis Index自動対応                     │
│  └─ ⏸️ マルチユーザー対応                       │
│                                                  │
│  技術選定 (11/20):                              │
│  ├─ ✅ React（選択済み）                         │
│  └─ ⏸️ Vue                                     │
│                                                  │
│  [閉じる]                                        │
└─────────────────────────────────────────────────┘
```

**なぜ必要か**:
- 「選択肢を奪われない」という安心感
- 後で「あの時の別の選択肢は？」と振り返れる
- 意思決定の履歴が残る

---

### 優先度5: Re-evaluation UI（再評価プロセス可視化）

**あなたの体験**:

```
あなた: "このコードの問題点を教えて"

Claude: "問題点は..."

┌─────────────────────────────────────────────────┐
│  🔄 Re-evaluation Phase 発動                     │
│                                                  │
│  ✅ Detect: 応答内容に不整合を検出                │
│  ✅ Isolate: 問題箇所を特定                       │
│  ⏳ Align: 整合性を確認中...                      │
│  ○ Decide                                       │
│  ○ Apply                                        │
│  ○ Log                                          │
│                                                  │
│  [詳細を見る]                                    │
└─────────────────────────────────────────────────┘

↓ 完了後

Claude: "先ほどの応答を修正します。問題点は..."

┌─────────────────────────────────────────────────┐
│  ✅ Re-evaluation 完了                           │
│                                                  │
│  修正内容:                                       │
│  - 変数名の誤りを訂正                             │
│  - セキュリティ考慮点を追加                       │
│                                                  │
│  [修正前の応答を見る]                            │
└─────────────────────────────────────────────────┘
```

**なぜ必要か**:
- AIが「間違えて直した」プロセスが見える
- 「なぜ変わったか」が説明される
- 信頼性の向上

---

## 3. 開発ロードマップ

### Sprint 14-15: コア機能（4週間）

```
Week 1-2: Contradiction Detection UI
├─ 矛盾一覧表示
├─ 解決フロー
└─ 通知表示

Week 3-4: WebSocket統合
├─ リアルタイム接続
├─ 状態表示
└─ フォールバック（接続切れ対策）
```

**完了後のあなたの体験**:
- ブラウザから矛盾を確認・解決できる
- リアルタイムで応答が来る

### Sprint 16-17: 分析・可視化（4週間）

```
Week 5-6: Dashboard Analytics
├─ Crisis Index表示
├─ ERF状態表示
└─ 矛盾履歴グラフ

Week 7-8: Choice Preservation UI
├─ 選択肢保存表示
├─ 保留選択肢一覧
└─ 履歴表示
```

**完了後のあなたの体験**:
- システム状態が一目でわかる
- 過去の選択肢を振り返れる

### Sprint 18: 高度な機能（2週間）

```
Week 9-10: Re-evaluation UI
├─ プロセス可視化
├─ 修正内容表示
└─ 履歴表示
```

**完了後のあなたの体験**:
- AIの自己修正プロセスが見える
- 完全なResonant Engineのブラウザ体験

---

## 4. 全体像

```
┌─────────────────────────────────────────────────────────────────────┐
│                     Resonant Engine (ブラウザ版)                      │
│                                                                      │
│  ┌───────────────────────────────────────────────────────────────┐ │
│  │                        Dashboard                              │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐          │ │
│  │  │Crisis Index │  │ERF Status   │  │ 目標進捗    │          │ │
│  │  │    32/100   │  │ I:0.4 V:+0.3│  │   70%      │          │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘          │ │
│  └───────────────────────────────────────────────────────────────┘ │
│                                                                      │
│  ┌───────────────────────────────────────────────────────────────┐ │
│  │                        Chat Area                              │ │
│  │                                                               │ │
│  │  あなた: 次のSprintを企画したい                                │ │
│  │                                                               │ │
│  │  Claude: 3つの選択肢があります...                              │ │
│  │                                                               │ │
│  │  ⚠️ 矛盾検出: 過去の発言と異なります [解決する]                │ │
│  │                                                               │ │
│  │  🔄 Re-evaluation中... [詳細]                                 │ │
│  │                                                               │ │
│  └───────────────────────────────────────────────────────────────┘ │
│                                                                      │
│  ┌───────────────────────────────────────────────────────────────┐ │
│  │  [メッセージを入力...]                           [送信]       │ │
│  └───────────────────────────────────────────────────────────────┘ │
│                                                                      │
│  ┌───────────────────────────────────────────────────────────────┐ │
│  │  サイドパネル                                                  │ │
│  │  ├─ 保留中の選択肢 (3)                                        │ │
│  │  ├─ 未解決の矛盾 (1)                                          │ │
│  │  └─ Re-evaluation履歴 (5)                                     │ │
│  └───────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 5. 機能対応表

| バックエンド機能 | フロントエンドUI | Sprint | 状態 |
|----------------|-----------------|--------|------|
| Contradiction Detection API | 矛盾検出UI | 14 | 未着手 |
| WebSocket Server | リアルタイム通信 | 15 | 未着手 |
| ERF / Crisis Index | Dashboard | 16 | 未着手 |
| Choice Preservation | 選択肢保存UI | 17 | 未着手 |
| Re-evaluation Phase | 再評価UI | 18 | 未着手 |
| User Profile | プロフィール設定 | (将来) | 未着手 |

---

## 6. あなたへの約束

1. **矛盾に気づける** → 一貫性が保たれる
2. **待たされない** → ストレス軽減
3. **状態が見える** → 安心感
4. **選択肢が残る** → 選択肢を奪われない
5. **修正プロセスが見える** → 信頼できる

これがフロントエンド開発で実現することです。

---

**作成日**: 2025-11-24
**作成者**: Claude (Kana)
**バージョン**: 1.0.0
