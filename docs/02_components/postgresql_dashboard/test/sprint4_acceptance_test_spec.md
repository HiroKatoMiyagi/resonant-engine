# Sprint 4: Intent自動処理 受け入れテスト仕様書

**テスト項目数**: 15件
**承認者**: 宏啓（プロジェクトオーナー）

---

## 1. LISTEN/NOTIFYテスト（3件）

| ID | テスト名 | 手順 | 期待結果 | 結果 |
|----|---------|------|----------|------|
| N01 | トリガー作成 | SQLマイグレーション | トリガー関数存在 | |
| N02 | NOTIFY発火 | INSERT INTO intents | pg_notify発行 | |
| N03 | ペイロード確認 | LISTEN結果確認 | JSON形式のペイロード | |

---

## 2. デーモン機能テスト（5件）

| ID | テスト名 | 手順 | 期待結果 | 結果 |
|----|---------|------|----------|------|
| D01 | デーモン起動 | python main.py | 起動ログ表示 | |
| D02 | DB接続プール | 接続状態確認 | プール確立 | |
| D03 | イベント受信 | Intent INSERT後 | ログに受信表示 | |
| D04 | Claude API呼び出し | Intent処理 | APIレスポンス取得 | |
| D05 | 結果保存 | DB確認 | statusがcompleted | |

---

## 3. エンドツーエンドテスト（4件）

| ID | テスト名 | 手順 | 期待結果 | 結果 |
|----|---------|------|----------|------|
| E01 | 自動処理フロー | Intent作成→完了 | 全自動処理 | |
| E02 | 通知生成 | 処理完了後 | 通知レコード作成 | |
| E03 | ダッシュボード表示 | UI確認 | 通知ベルに表示 | |
| E04 | 処理結果確認 | Intent詳細 | response内容表示 | |

---

## 4. 性能・安定性テスト（3件）

| ID | テスト名 | 測定 | 閾値 | 結果 |
|----|---------|------|------|------|
| P01 | 処理レイテンシ | Intent作成→完了 | < 5秒 | ___秒 |
| P02 | 連続稼働 | 24時間テスト | エラー率 < 5% | __% |
| P03 | 同時処理 | 10件並列 | 全て成功 | |

---

## 5. テスト結果サマリー

**合計**: ___/15 PASS

**重要テスト（必須PASS）**:
- N02: NOTIFY発火
- D04: Claude API呼び出し
- E01: 自動処理フロー
- P01: 処理レイテンシ

**判定**: PASS / FAIL

**承認**: ____________________

---

**作成日**: 2025-11-17
